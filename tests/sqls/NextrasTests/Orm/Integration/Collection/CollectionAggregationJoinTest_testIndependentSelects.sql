SELECT "authors".* FROM "public"."authors" AS "authors" LEFT JOIN "books" AS "books_any1" ON ((("authors"."id" = "books_any1"."author_id") AND "books_any1"."title" = 'Book 1') AND (("authors"."id" = "books_any1"."author_id") AND "books_any1"."price" = 50)) LEFT JOIN "books" AS "books_any2" ON ((("authors"."id" = "books_any2"."author_id") AND "books_any2"."title" = 'Book 2') AND (("authors"."id" = "books_any2"."author_id") AND "books_any2"."price" = 150)) GROUP BY "authors"."id", "authors"."id", "authors"."id", "authors"."id" HAVING (((COUNT("books_any1"."id") > 0) AND (COUNT("books_any1"."id") > 0)) AND ((COUNT("books_any2"."id") > 0) AND (COUNT("books_any2"."id") > 0)));
SELECT COUNT(*) AS count FROM (SELECT "authors"."id" FROM "public"."authors" AS "authors" LEFT JOIN "books" AS "books_any1" ON ((("authors"."id" = "books_any1"."author_id") AND "books_any1"."title" = 'Book 1') AND (("authors"."id" = "books_any1"."author_id") AND "books_any1"."price" = 50)) LEFT JOIN "books" AS "books_any2" ON ((("authors"."id" = "books_any2"."author_id") AND "books_any2"."title" = 'Book 2') AND (("authors"."id" = "books_any2"."author_id") AND "books_any2"."price" = 150)) GROUP BY "authors"."id", "authors"."id", "authors"."id", "authors"."id" HAVING (((COUNT("books_any1"."id") > 0) AND (COUNT("books_any1"."id") > 0)) AND ((COUNT("books_any2"."id") > 0) AND (COUNT("books_any2"."id") > 0)))) temp;
